import{o as r,c,a as e,r as _,s as v,u as N,b as T,d as w,e as j,w as k,f as M,t as f,g as i,h as S,i as V,j as g,v as x,k as B,l as L,m as R,F as W}from"./index.bb664abf.js";var O=(o,t)=>{const s=o.__vccOpts||o;for(const[p,a]of t)s[p]=a;return s};const z={name:"BxBxlFacebook"},H={class:"mx-auto",width:"1em",height:"1em",viewBox:"0 0 24 24"},K=e("path",{d:"M13.397 20.997v-8.196h2.765l.411-3.209h-3.176V7.548c0-.926.258-1.56 1.587-1.56h1.684V3.127A22.336 22.336 0 0 0 14.201 3c-2.444 0-4.122 1.492-4.122 4.231v2.355H7.332v3.209h2.753v8.202h3.312z",fill:"#ffffff"},null,-1),P=[K];function G(o,t,s,p,a,d){return r(),c("svg",H,P)}var J=O(z,[["render",G]]);const Q=()=>{const o=_(!1),t=_(!1),s=_(null);return{loading:t,error:o,login:({email:a,password:d})=>{t.value=!0,o.value=!1,s.value=null,v.auth.signInWithPassword({email:a,password:d}).then(n=>{t.value=!1,n.data.user?s.value=n.data.user:o.value=!0}).catch(n=>{t.value=!1,o.value=!0})},success:s}},X=()=>{const o=_(!1),t=_(!1),s=_(null);return{loading:t,error:o,signup:({email:a,password:d})=>{t.value=!0,o.value=!1,s.value=null,v.auth.signUp({email:a,password:d}).then(n=>{t.value=!1,n.data.user?s.value=n.data.user:o.value=!0}).catch(n=>{t.value=!1,o.value=!0})},success:s}},Y={class:"bg-primary py-10 text-white text-center font-bold text-3xl mb-8 leading-loose"},Z={class:"max-w-lg mx-auto w-5/6"},ee={class:"text-center mb-4"},se=["disabled"],te={class:"bg-[#4267B2] inline-block align-middle rounded text-center text-white text-4xl"},oe=e("span",{class:"ml-2 inline-block align-middle"},"\u7528FB\u767B\u5165",-1),ne=["onSubmit"],ae={class:"mb-4"},le=["disabled"],ie={class:"mb-4"},de=["disabled"],re={class:"flex justify-end items-center space-x-6"},ce={key:0,class:"text-amber-600"},ue=["disabled"],pe=["disabled"],_e={key:0},be={key:1},he=e("i",{class:"bx bx-loader-alt bx-spin"},null,-1),me=[he],ge=["onSubmit"],xe={class:"mb-4"},fe=["disabled"],ve={class:"mb-4"},ye=["disabled"],we={class:"flex justify-end items-center space-x-6"},ke={key:0,class:"text-amber-600"},Se=["disabled"],Ve={key:0},Be={key:1},Le=e("i",{class:"bx bx-loader-alt bx-spin"},null,-1),Ue=[Le],$e={class:"text-center"},Ce={class:"text-stone-600 mb-4"},Fe={__name:"AuthView",setup(o){const t=N(),s=_(!0),p=T(),a=w({email:"bobhus394@gmail.com",password:"222111"}),d=w({email:"hello@mail.com",password:"222111"}),{loading:n,login:U,error:$,success:C}=Q(),{loading:h,signup:q,error:F,success:A}=X(),D=()=>{U({email:a.email,password:a.password})},y=j();k(C,b=>{var m;const l=(m=y.query)!=null&&m.redirect?y.query.redirect:"/";t.id=b.id,p.push(l)}),k(A,b=>{t.id=b.id,p.push("/profile")});const E=()=>{q({email:d.email,password:d.password})},I=async()=>{const b={}.VITE_CALLBACK_URL+"/callback/";await v.auth.signInWithOAuth({provider:"facebook",options:{redirectTo:b}})};return(b,l)=>{const m=M("router-link");return r(),c(W,null,[e("h2",Y,f(s.value?"\u767B\u5165":"\u8A3B\u518A"),1),e("div",Z,[e("div",ee,[e("button",{disabled:i(n),type:"button",onClick:I},[e("div",te,[S(J)]),oe],8,se)]),s.value?(r(),c("form",{key:0,class:"mb-4",onSubmit:V(D,["prevent"])},[e("p",ae,[g(e("input",{disabled:i(n),"onUpdate:modelValue":l[0]||(l[0]=u=>a.email=u),required:"",class:"focus:ring-2 disabled:text-stone-400 block w-full text-xl text-stone-700 border-none py-6 px-10 rounded-full ring-primary bg-gray-100",placeholder:"\u4FE1\u7BB1",type:"email"},null,8,le),[[x,a.email]])]),e("p",ie,[g(e("input",{disabled:i(n),"onUpdate:modelValue":l[1]||(l[1]=u=>a.password=u),required:"",class:"focus:ring-2 disabled:text-stone-400 block w-full text-xl text-stone-700 border-none py-6 px-10 rounded-full ring-primary bg-gray-100",placeholder:"\u5BC6\u78BC",type:"password"},null,8,de),[[x,a.password]])]),e("div",re,[i($)?(r(),c("span",ce,"\u597D\u50CF\u54EA\u88E1\u51FA\u932F\u4E86")):B("",!0),e("button",{disabled:i(n),class:"text-stone-600 hover:underline",type:"button"},"\u5FD8\u8A18\u5BC6\u78BC?",8,ue),e("button",{disabled:i(n),class:"text-md font-bold hover:opacity-80 text-white bg-primary py-4 w-24 rounded-full",type:"submit"},[i(n)?(r(),c("span",be,me)):(r(),c("span",_e,"\u767B\u5165"))],8,pe)])],40,ne)):(r(),c("form",{key:1,class:"mb-4",onSubmit:V(E,["prevent"])},[e("p",xe,[g(e("input",{disabled:i(h),"onUpdate:modelValue":l[2]||(l[2]=u=>d.email=u),required:"",class:"focus:ring-2 disabled:text-stone-400 block w-full text-xl text-stone-700 border-none py-6 px-10 rounded-full ring-primary bg-gray-100",placeholder:"\u4FE1\u7BB1",type:"email"},null,8,fe),[[x,d.email]])]),e("p",ve,[g(e("input",{disabled:i(h),"onUpdate:modelValue":l[3]||(l[3]=u=>d.password=u),required:"",class:"focus:ring-2 disabled:text-stone-400 block w-full text-xl text-stone-700 border-none py-6 px-10 rounded-full ring-primary bg-gray-100",placeholder:"\u5BC6\u78BC",type:"password"},null,8,ye),[[x,d.password]])]),e("div",we,[i(F)?(r(),c("span",ke,"\u597D\u50CF\u54EA\u88E1\u51FA\u932F\u4E86")):B("",!0),e("button",{disabled:i(h),class:"text-md font-bold hover:opacity-80 text-white bg-primary py-4 w-24 rounded-full",type:"submit"},[i(h)?(r(),c("span",Be,Ue)):(r(),c("span",Ve,"\u8A3B\u518A"))],8,Se)])],40,ge)),e("div",$e,[e("p",Ce,[L(f(s.value?"\u9084\u6C92\u6709\u5E33\u865F":"\u6709\u5E33\u865F\u4E86")+"\uFF1F ",1),e("button",{onClick:l[4]||(l[4]=u=>s.value=!s.value),class:"underline",type:"button"},f(s.value?"\u7ACB\u523B\u8A3B\u518A":"\u524D\u5F80\u767B\u5165"),1)]),e("p",null,[S(m,{class:"underline",to:"/"},{default:R(()=>[L("\u56DE\u9996\u9801")]),_:1})])])])],64)}}};export{Fe as default};
