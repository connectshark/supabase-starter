import{i as $,u as b}from"./useGallery.eb4442d7.js";import{n as v,g,o as d,c as m,a as i,t as _,u as x,r as k,F as A,p as Y,q as F,s as H}from"./index.bb664abf.js";var S;const L=typeof window!="undefined";L&&((S=window==null?void 0:window.navigator)==null?void 0:S.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function f(t){return typeof t=="function"?t():g(t)}const E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,I=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|SSS/g,B=(t,e,r,o)=>{let s=t<12?"AM":"PM";return o&&(s=s.split("").reduce((a,l)=>a+=`${l}.`,"")),r?s.toLowerCase():s},G=(t,e,r={})=>{var o;const s=t.getFullYear(),a=t.getMonth(),l=t.getDate(),n=t.getHours(),c=t.getMinutes(),p=t.getSeconds(),w=t.getMilliseconds(),h=t.getDay(),u=(o=r.customMeridiem)!=null?o:B,D={YY:()=>String(s).slice(-2),YYYY:()=>s,M:()=>a+1,MM:()=>`${a+1}`.padStart(2,"0"),MMM:()=>t.toLocaleDateString(r.locales,{month:"short"}),MMMM:()=>t.toLocaleDateString(r.locales,{month:"long"}),D:()=>String(l),DD:()=>`${l}`.padStart(2,"0"),H:()=>String(n),HH:()=>`${n}`.padStart(2,"0"),h:()=>`${n%12||12}`.padStart(1,"0"),hh:()=>`${n%12||12}`.padStart(2,"0"),m:()=>String(c),mm:()=>`${c}`.padStart(2,"0"),s:()=>String(p),ss:()=>`${p}`.padStart(2,"0"),SSS:()=>`${w}`.padStart(3,"0"),d:()=>h,dd:()=>t.toLocaleDateString(r.locales,{weekday:"narrow"}),ddd:()=>t.toLocaleDateString(r.locales,{weekday:"short"}),dddd:()=>t.toLocaleDateString(r.locales,{weekday:"long"}),A:()=>u(n,c),AA:()=>u(n,c,!1,!0),a:()=>u(n,c,!0),aa:()=>u(n,c,!0,!0)};return e.replace(I,(M,y)=>y||D[M]())},N=t=>{if(t===null)return new Date(NaN);if(t===void 0)return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){const e=t.match(E);if(e){const r=e[2]-1||0,o=(e[7]||"0").substring(0,3);return new Date(e[1],r,e[3]||1,e[4]||0,e[5]||0,e[6]||0,o)}}return new Date(t)};function R(t,e="HH:mm:ss",r={}){return v(()=>G(N(f(t)),f(e),r))}const C={class:"mb-4 rounded-xl overflow-hidden shadow-lg"},P=["src"],q={__name:"FigureWrapper",props:{img_url:String,created_at:String,description:String,id:Number,deleteImg:Function},setup(t){const e=t,r=R(e.created_at,"MM/DD");return(o,s)=>(d(),m("li",null,[i("figure",C,[i("img",{class:"block w-full h-80 object-contain",src:e.img_url,loading:"lazy"},null,8,P)]),i("figcaption",null,_(e.description?e.description:"\u7121\u63CF\u8FF0"),1),i("p",null,"\u4E0A\u50B3\u65E5\u671F: "+_(g(r)),1),i("p",null,[i("button",{class:"bg-stone-700 text-white p-3 rounded-lg",onClick:s[0]||(s[0]=a=>t.deleteImg(e.id))},"\u522A\u9664\u7167\u7247")])]))}},z={class:"grid gap-2 w-72 mx-auto"},T={key:0,class:"text-center text-primary"},U=i("i",{class:"bx bx-loader-alt bx-spin bx-lg"},null,-1),X=[U],O={__name:"Gallery",setup(t){new $({clientId:"3466d7179394743"}),x(),k("");const{loading:e,list:r,reload:o}=b(),s=async a=>{const{data:l,error:n}=await H.from("gallery").update({active:!1}).eq("id",a);n&&console.error(n),o()};return(a,l)=>(d(),m("ul",z,[g(e)?(d(),m("div",T,X)):(d(!0),m(A,{key:1},Y(g(r),n=>(d(),F(q,{key:n.id,img_url:n.img_url,created_at:n.created_at,description:n.description,id:n.id,deleteImg:s},null,8,["img_url","created_at","description","id"]))),128))]))}};export{O as default};
